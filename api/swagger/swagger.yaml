swagger: "2.0"
info:
  version: "0.0.1"
  title: Starships Collection
# during dev, should point to your local machine
host: localhost:10010
# basePath prefixes all resource paths 
basePath: /
# 
schemes:
  # tip: remove http to make production-grade
  - http
  - https
# format of bodies a client can send (Content-Type)
consumes:
  - application/json
# format of the responses to the client (Accepts)
produces:
  - application/json
paths:
  /starships:
    x-swagger-router-controller: starships
    get:
      operationId: getAll
      summary: Get all starships
      description: get starships list
      responses:
        200:
          description: Success
          schema:
            $ref: "#/definitions/GetStarshipsListResponse"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
    post:
      operationId: save
      summary: add new starship
      description: add a new starship to the list
      # movie info to be stored
      parameters:
        - name: model
          description: Starship properties
          in: body
          required: true
          schema:
            $ref: "#/definitions/Starship"
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/GeneralResponse"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse" 
            
  /starships/{id}:
    x-swagger-router-controller: starships
    # our controller name
    get:
      operationId: get
      description: get a starship
      # define the type of response for Success "200" and Error
      parameters:
        - name: id
          type: string
          in: path
          required: true
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/Starship"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"          
    put:
      operationId: update
      description: update a starship
      # define the parameters
      parameters:
        - name: id
          description: Starship id
          type: string
          in: path
          required: true
        - name: model
          description: Starship properties
          in: body
          required: true
          schema:
            $ref: "#/definitions/Starship"
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/GeneralResponse"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"   
    delete:
      operationId: deleteOne
      description: delete a starship
      # define the parameters
      parameters:
        - name: id
          description: Starship id
          type: string
          in: path
          required: true
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/GeneralResponse"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"            
    
  /swagger:
    x-swagger-pipe: swagger_raw
# complex objects have schema definitions
definitions:
 # ---------------------------------------------------------#
 # ---------------------------------------------------------#
 # General Responses
 # ---------------------------------------------------------#
 # ---------------------------------------------------------#       
  ErrorResponse:
    required:
      - message
    properties:
      message:
        type: string
  GeneralResponse:
      type: object
      properties:
        success:
          type: number
          description: returns 1 if successful
        description:
          type: string
          description: a short comment 
      required:
        - success
        - description        
 # ---------------------------------------------------------#
 # ---------------------------------------------------------#
 # models      
 # ---------------------------------------------------------#
 # ---------------------------------------------------------#
  Starship:        
    description: A Starship
    type: object
    title: Starship
    required:
    - name
    - model
    - max_atmosphering_speed
    - url
    properties:        
      model:
        type: string
        description: The model or official name of this starship. Such as T-65 X-wing
          or DS-1 Orbital Battle Station.
      max_atmosphering_speed:
        type: string
        description: The maximum speed of this starship in atmosphere. n/a if this starship
          is incapable of atmosphering flight.
      name:
        type: string
        description: The name of this starship. The common name, such as Death Star.
      url:
        type: string
        format: uri
        description: The hypermedia URL of this resource.
 # ---------------------------------------------------------#
 # models responses
 # ---------------------------------------------------------#     
        
  GetStarshipsListResponse:
      required:
        - starships
      properties:
        # The array of sharship
        starships:
          type: array
          items: 
            type: object
            properties:
              model:
                type: string
                description: The model or official name of this starship. Such as T-65 X-wing
                  or DS-1 Orbital Battle Station.
              max_atmosphering_speed:
                type: string
                description: The maximum speed of this starship in atmosphere. n/a if this starship
                  is incapable of atmosphering flight.
              name:
                type: string
                description: The name of this starship. The common name, such as Death Star.
              url:
                type: string
                format: uri
                description: The hypermedia URL of this resource.
            title: Starship